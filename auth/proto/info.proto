syntax = "proto3";

package info;

service Info {
    rpc UserById (UserByIdReq) returns (UserReply);
    rpc BucketIsAllowed (AllowedBucketReq) returns (AllowedBucketReply);
    rpc GetBucket(BucketReq) returns (BucketReply);
}

message BucketUser {
    string name = 1;
    repeated Permissions permissions = 2;
}

message BucketReq {
    optional string name = 1;
}

message BucketReply {
    repeated string buckets = 1;
}

message UserByIdReq {
    bytes id = 1;
}

message UserReply {
    Role role = 1;
    repeated BucketUser buckets = 2;
}

enum Role {
    SUPER_US = 0;
    ADMINISTRATOR = 1;
    OPERATOR = 2;
}

enum Permissions {
    PUT = 0;
    GET = 1;
    DELETE = 2;
    READ = 3;
}

message AllowedBucketReq {
    bytes id = 1;
    string name = 2;
    Permissions permissions = 3;
}

message AllowedBucketReply {
    bool allowed = 1;
}